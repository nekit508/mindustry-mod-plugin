apply plugin: "groovy"
apply plugin: "java"
apply plugin: "maven-publish"
apply plugin: "java-gradle-plugin"
sourceSets.main.groovy.srcDirs = [".../buildSrc/src"]

repositories {
    mavenCentral()
}

gradlePlugin {
    plugins{
        NModPlugin {
            id = "${rootProject.group}.${rootProject.name}"
            implementationClass = "nekit508.NMPlugin"
        }
    }
}

dependencies {
    compileOnly gradleApi()
}

jar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE

    from {
        project.configurations.runtimeClasspath.collect {
            it.isDirectory() ? it : project.zipTree(it)
        }
    }
}